{"version":3,"file":"static/js/821.9dc57aec.chunk.js","mappings":"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","sources":["../node_modules/react-select/dist/useAsync-85924129.esm.js","../node_modules/react-select/async/dist/react-select-async.esm.js","pages/Admin/Books/Form/index.tsx","utils/debounce.ts"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport { useRef, useState, useEffect, useCallback } from 'react';\nimport { L as handleInputChange } from './index-baa8dc4f.esm.js';\n\nvar _excluded = [\"defaultOptions\", \"cacheOptions\", \"loadOptions\", \"options\", \"isLoading\", \"onInputChange\", \"filterOption\"];\nfunction useAsync(_ref) {\n  var _ref$defaultOptions = _ref.defaultOptions,\n    propsDefaultOptions = _ref$defaultOptions === void 0 ? false : _ref$defaultOptions,\n    _ref$cacheOptions = _ref.cacheOptions,\n    cacheOptions = _ref$cacheOptions === void 0 ? false : _ref$cacheOptions,\n    propsLoadOptions = _ref.loadOptions;\n    _ref.options;\n    var _ref$isLoading = _ref.isLoading,\n    propsIsLoading = _ref$isLoading === void 0 ? false : _ref$isLoading,\n    propsOnInputChange = _ref.onInputChange,\n    _ref$filterOption = _ref.filterOption,\n    filterOption = _ref$filterOption === void 0 ? null : _ref$filterOption,\n    restSelectProps = _objectWithoutProperties(_ref, _excluded);\n  var propsInputValue = restSelectProps.inputValue;\n  var lastRequest = useRef(undefined);\n  var mounted = useRef(false);\n  var _useState = useState(Array.isArray(propsDefaultOptions) ? propsDefaultOptions : undefined),\n    _useState2 = _slicedToArray(_useState, 2),\n    defaultOptions = _useState2[0],\n    setDefaultOptions = _useState2[1];\n  var _useState3 = useState(typeof propsInputValue !== 'undefined' ? propsInputValue : ''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    stateInputValue = _useState4[0],\n    setStateInputValue = _useState4[1];\n  var _useState5 = useState(propsDefaultOptions === true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isLoading = _useState6[0],\n    setIsLoading = _useState6[1];\n  var _useState7 = useState(undefined),\n    _useState8 = _slicedToArray(_useState7, 2),\n    loadedInputValue = _useState8[0],\n    setLoadedInputValue = _useState8[1];\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    loadedOptions = _useState10[0],\n    setLoadedOptions = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    passEmptyOptions = _useState12[0],\n    setPassEmptyOptions = _useState12[1];\n  var _useState13 = useState({}),\n    _useState14 = _slicedToArray(_useState13, 2),\n    optionsCache = _useState14[0],\n    setOptionsCache = _useState14[1];\n  var _useState15 = useState(undefined),\n    _useState16 = _slicedToArray(_useState15, 2),\n    prevDefaultOptions = _useState16[0],\n    setPrevDefaultOptions = _useState16[1];\n  var _useState17 = useState(undefined),\n    _useState18 = _slicedToArray(_useState17, 2),\n    prevCacheOptions = _useState18[0],\n    setPrevCacheOptions = _useState18[1];\n  if (cacheOptions !== prevCacheOptions) {\n    setOptionsCache({});\n    setPrevCacheOptions(cacheOptions);\n  }\n  if (propsDefaultOptions !== prevDefaultOptions) {\n    setDefaultOptions(Array.isArray(propsDefaultOptions) ? propsDefaultOptions : undefined);\n    setPrevDefaultOptions(propsDefaultOptions);\n  }\n  useEffect(function () {\n    mounted.current = true;\n    return function () {\n      mounted.current = false;\n    };\n  }, []);\n  var loadOptions = useCallback(function (inputValue, callback) {\n    if (!propsLoadOptions) return callback();\n    var loader = propsLoadOptions(inputValue, callback);\n    if (loader && typeof loader.then === 'function') {\n      loader.then(callback, function () {\n        return callback();\n      });\n    }\n  }, [propsLoadOptions]);\n  useEffect(function () {\n    if (propsDefaultOptions === true) {\n      loadOptions(stateInputValue, function (options) {\n        if (!mounted.current) return;\n        setDefaultOptions(options || []);\n        setIsLoading(!!lastRequest.current);\n      });\n    }\n    // NOTE: this effect is designed to only run when the component mounts,\n    // so we don't want to include any hook dependencies\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var onInputChange = useCallback(function (newValue, actionMeta) {\n    var inputValue = handleInputChange(newValue, actionMeta, propsOnInputChange);\n    if (!inputValue) {\n      lastRequest.current = undefined;\n      setStateInputValue('');\n      setLoadedInputValue('');\n      setLoadedOptions([]);\n      setIsLoading(false);\n      setPassEmptyOptions(false);\n      return;\n    }\n    if (cacheOptions && optionsCache[inputValue]) {\n      setStateInputValue(inputValue);\n      setLoadedInputValue(inputValue);\n      setLoadedOptions(optionsCache[inputValue]);\n      setIsLoading(false);\n      setPassEmptyOptions(false);\n    } else {\n      var request = lastRequest.current = {};\n      setStateInputValue(inputValue);\n      setIsLoading(true);\n      setPassEmptyOptions(!loadedInputValue);\n      loadOptions(inputValue, function (options) {\n        if (!mounted) return;\n        if (request !== lastRequest.current) return;\n        lastRequest.current = undefined;\n        setIsLoading(false);\n        setLoadedInputValue(inputValue);\n        setLoadedOptions(options || []);\n        setPassEmptyOptions(false);\n        setOptionsCache(options ? _objectSpread(_objectSpread({}, optionsCache), {}, _defineProperty({}, inputValue, options)) : optionsCache);\n      });\n    }\n  }, [cacheOptions, loadOptions, loadedInputValue, optionsCache, propsOnInputChange]);\n  var options = passEmptyOptions ? [] : stateInputValue && loadedInputValue ? loadedOptions : defaultOptions || [];\n  return _objectSpread(_objectSpread({}, restSelectProps), {}, {\n    options: options,\n    isLoading: isLoading || propsIsLoading,\n    onInputChange: onInputChange,\n    filterOption: filterOption\n  });\n}\n\nexport { useAsync as u };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { forwardRef } from 'react';\nimport { S as Select } from '../../dist/Select-aecb2a80.esm.js';\nimport { u as useStateManager } from '../../dist/useStateManager-7e1e8489.esm.js';\nimport { u as useAsync } from '../../dist/useAsync-85924129.esm.js';\nexport { u as useAsync } from '../../dist/useAsync-85924129.esm.js';\nimport '@babel/runtime/helpers/objectSpread2';\nimport '@babel/runtime/helpers/classCallCheck';\nimport '@babel/runtime/helpers/createClass';\nimport '@babel/runtime/helpers/inherits';\nimport '@babel/runtime/helpers/createSuper';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '../../dist/index-baa8dc4f.esm.js';\nimport '@emotion/react';\nimport '@babel/runtime/helpers/slicedToArray';\nimport '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/typeof';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport '@babel/runtime/helpers/defineProperty';\nimport 'react-dom';\nimport '@floating-ui/dom';\nimport 'use-isomorphic-layout-effect';\nimport 'memoize-one';\n\nvar AsyncSelect = /*#__PURE__*/forwardRef(function (props, ref) {\n  var stateManagedProps = useAsync(props);\n  var selectProps = useStateManager(stateManagedProps);\n  return /*#__PURE__*/React.createElement(Select, _extends({\n    ref: ref\n  }, selectProps));\n});\nvar AsyncSelect$1 = AsyncSelect;\n\nexport { AsyncSelect$1 as default };\n","import { AxiosRequestConfig } from 'axios'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Controller, useForm } from 'react-hook-form'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\n\r\nimport Select from 'react-select'\r\nimport AsyncSelect from 'react-select/async'\r\n\r\nimport { Author } from '../../../../types/author'\r\nimport { Book } from '../../../../types/book'\r\nimport { Category } from '../../../../types/category'\r\n\r\nimport { requestBackend } from '../../../../utils/requests'\r\n\r\nimport { toast } from 'react-toastify'\r\n\r\nimport { debounce } from '../../../../utils/debounce'\r\nimport './styles.css'\r\n\r\ntype UrlParams = {\r\n  bookId: string\r\n}\r\n\r\nconst Form = () => {\r\n\r\n  const { bookId } = useParams<UrlParams>()\r\n\r\n  const [initialData, setInitialData] = useState<Book>()\r\n\r\n  const isEditing = bookId !== 'create'\r\n\r\n  const history = useNavigate()\r\n\r\n  const [selectCategories, setSelectCategories] = useState<Category[]>([])\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    setValue,\r\n    control,\r\n  } = useForm<Book>()\r\n\r\n  useEffect(() => {\r\n\r\n    requestBackend({ url: '/api/categories/v2' })\r\n      .then((response) => {\r\n        setSelectCategories(response.data)\r\n      })\r\n\r\n  }, [])\r\n\r\n  const selectAuthorsAsync = debounce((searchValue: string, callback: any) => {\r\n\r\n    requestBackend({ url: '/api/authors/v2/all' })\r\n      .then((response) => {\r\n        callback(response.data.filter((author: Author) => author.name.toLowerCase().includes(searchValue.toLowerCase())))\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n\r\n  }, 500)\r\n\r\n  useEffect(() => {\r\n\r\n    if (isEditing) {\r\n\r\n      requestBackend({ url: `/api/books/v2/${bookId}` })\r\n\r\n        .then((response) => {\r\n\r\n          const book = response.data as Book\r\n\r\n          setValue('name', book.name)\r\n          setValue('releaseDate', book.releaseDate)\r\n          setValue('author', book.author)\r\n          setValue('imgUrl', book.imgUrl)\r\n          setValue('categories', book.categories)\r\n          setInitialData(book)\r\n\r\n        })\r\n\r\n    }\r\n\r\n  }, [isEditing, bookId, setValue])\r\n\r\n  const onSubmit = (formData: Book) => {\r\n\r\n    const data = {\r\n\r\n      ...formData,\r\n      status: 'AVAILABLE'\r\n\r\n    }\r\n\r\n    const config: AxiosRequestConfig = {\r\n\r\n      method: isEditing ? 'PUT' : 'POST',\r\n      url: isEditing ? `/api/books/v2/${bookId}` : '/api/books/v2',\r\n      data,\r\n      withCredentials: true\r\n\r\n    }\r\n\r\n    requestBackend(config)\r\n      .then(() => {\r\n        toast.info(`Livro #${bookId} ${isEditing ? 'atualizado' : 'cadastrado'} com sucesso`, { autoClose: 3000 })\r\n        history('/admin/books')\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n        toast.error(`Falha ao cadastrar livro: \\n ${error.response.data.message}`)\r\n      })\r\n\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    history('/admin/books')\r\n  }\r\n\r\n  return (\r\n\r\n    <div className='product-crud-container'>\r\n\r\n      <div className='base-card product-crud-form-card'>\r\n        <h1 className='product-crud-form-title'>DADOS DO LIVRO {isEditing && ` - código ${bookId}`}</h1>\r\n\r\n        {isEditing &&\r\n          <h2 className='product-crud-form-status'>{(initialData?.status === 'AVAILABLE' ? 'Disponível' : 'Reservado')}</h2>\r\n        }\r\n\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n\r\n          <div className='row product-crud-inputs-container'>\r\n\r\n            <div className='col-lg-6 product-crud-inputs-left-container'>\r\n\r\n              <div className='margin-bottom-30'>\r\n\r\n                <input\r\n                  {...register('name', {\r\n                    required: 'Campo obrigatório',\r\n                    pattern: {\r\n                      value: /^[A-Za-z0-9'& -#]+$/,\r\n                      message: 'Nome deve conter apenas letras e números',\r\n                    },\r\n                  })}\r\n                  type='text'\r\n                  className={`form-control base-input ${errors.name ? 'is-invalid' : ''\r\n                    }`}\r\n                  placeholder='Título do livro'\r\n                  name='name'\r\n                />\r\n\r\n                <div className='invalid-feedback d-block'>\r\n                  {errors.name?.message}\r\n                </div>\r\n\r\n              </div>\r\n\r\n              <div className='margin-bottom-30 '>\r\n                <Controller\r\n                  name='categories'\r\n                  rules={{ required: true }}\r\n                  control={control}\r\n                  render={({ field }) => (\r\n                    <Select\r\n                      {...field}\r\n                      options={selectCategories}\r\n                      isClearable\r\n                      classNamePrefix='product-crud-select'\r\n                      isMulti\r\n                      onChange={(value) => setValue('categories', [...value])}\r\n                      getOptionLabel={(category: Category) => category.name}\r\n                      getOptionValue={(category: Category) => String(category.id)}\r\n                      placeholder='Categoria'\r\n                    />\r\n                  )}\r\n                />\r\n\r\n                {errors.categories && (\r\n                  <div className='invalid-feedback d-block'>\r\n                    Campo obrigatório\r\n                  </div>\r\n                )}\r\n\r\n              </div>\r\n\r\n              <div className='margin-bottom-30 '>\r\n                <Controller\r\n                  name='author'\r\n                  rules={{ required: true }}\r\n                  control={control}\r\n                  render={({ field }) => (\r\n                    <AsyncSelect\r\n                      {...field}\r\n                      loadOptions={selectAuthorsAsync}\r\n                      isClearable\r\n                      isSearchable\r\n                      classNamePrefix='product-crud-select'\r\n                      onChange={(value) => setValue('author', value as Author)}\r\n                      getOptionLabel={(author: Author) => author.name}\r\n                      getOptionValue={(author: Author) => String(author.id)}\r\n                      placeholder='Autor'\r\n                    />\r\n                  )}\r\n                />\r\n\r\n                {errors.author && (\r\n                  <div className='invalid-feedback d-block'>\r\n                    Campo obrigatório\r\n                  </div>\r\n                )}\r\n\r\n              </div>\r\n\r\n              <div className='margin-bottom-30'>\r\n                <input\r\n                  {...register('imgUrl', {\r\n                    required: 'Campo obrigatório',\r\n                    pattern: {\r\n                      value: /^(https?|chrome):\\/\\/[^\\s$.?#].[^\\s]*$/gm,\r\n                      message: 'Deve ser uma URL válida',\r\n                    },\r\n                  })}\r\n                  type='text'\r\n                  className={`form-control base-input ${errors.imgUrl ? 'is-invalid' : ''\r\n                    }`}\r\n                  placeholder='URL da imagem do livro'\r\n                  name='imgUrl'\r\n                />\r\n\r\n                <div className='invalid-feedback d-block'>\r\n                  {errors.imgUrl?.message}\r\n                </div>\r\n\r\n              </div>\r\n\r\n              <div className='margin-bottom-30'>\r\n                <input\r\n                  {...register('releaseDate', {\r\n                    required: 'Campo obrigatório'\r\n                  })}\r\n                  type='date'\r\n                  className={`form-control base-input ${errors.releaseDate ? 'is-invalid' : ''\r\n                    }`}\r\n                  placeholder='Release date'\r\n                  name='releaseDate'\r\n                />\r\n\r\n                <div className='invalid-feedback d-block'>\r\n                  {errors.releaseDate?.message}\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <div className='product-crud-buttons-container'>\r\n\r\n            <button\r\n              className='btn btn-outline-danger product-crud-button'\r\n              onClick={handleCancel}\r\n            >\r\n              CANCELAR\r\n            </button>\r\n\r\n            <button className='btn btn-primary product-crud-button text-white'>\r\n              SALVAR\r\n            </button>\r\n\r\n          </div>\r\n\r\n        </form>\r\n\r\n      </div>\r\n\r\n    </div>\r\n\r\n  )\r\n\r\n}\r\n\r\nexport default Form","export const debounce = <T extends (...args: any[]) => void>(\r\n    func: T,\r\n    delay: number\r\n) => {\r\n    let timeoutId: ReturnType<typeof setTimeout>\r\n    return (...args: Parameters<T>) => {\r\n        clearTimeout(timeoutId)\r\n        timeoutId = setTimeout(() => {\r\n            func(...args)\r\n        }, delay)\r\n    }\r\n}\r\n"],"names":["_excluded","AsyncSelect$1","forwardRef","props","ref","stateManagedProps","_ref","_ref$defaultOptions","defaultOptions","propsDefaultOptions","_ref$cacheOptions","cacheOptions","propsLoadOptions","loadOptions","options","_ref$isLoading","isLoading","propsIsLoading","propsOnInputChange","onInputChange","_ref$filterOption","filterOption","restSelectProps","_objectWithoutProperties","propsInputValue","inputValue","lastRequest","useRef","undefined","mounted","_useState","useState","Array","isArray","_useState2","_slicedToArray","setDefaultOptions","_useState3","_useState4","stateInputValue","setStateInputValue","_useState5","_useState6","setIsLoading","_useState7","_useState8","loadedInputValue","setLoadedInputValue","_useState9","_useState10","loadedOptions","setLoadedOptions","_useState11","_useState12","passEmptyOptions","setPassEmptyOptions","_useState13","_useState14","optionsCache","setOptionsCache","_useState15","_useState16","prevDefaultOptions","setPrevDefaultOptions","_useState17","_useState18","prevCacheOptions","setPrevCacheOptions","useEffect","current","useCallback","callback","loader","then","newValue","actionMeta","handleInputChange","request","_objectSpread","_defineProperty","useAsync","selectProps","useStateManager","React","Select","_extends","_errors$name","_errors$imgUrl","_errors$releaseDate","bookId","useParams","initialData","setInitialData","isEditing","history","useNavigate","selectCategories","setSelectCategories","_useForm","useForm","register","handleSubmit","errors","formState","setValue","control","requestBackend","url","response","data","selectAuthorsAsync","debounce","searchValue","filter","author","name","toLowerCase","includes","catch","error","console","log","concat","book","releaseDate","imgUrl","categories","_jsx","className","children","_jsxs","status","onSubmit","formData","config","method","withCredentials","toast","info","autoClose","message","required","pattern","value","type","placeholder","Controller","rules","render","field","isClearable","classNamePrefix","isMulti","onChange","_toConsumableArray","getOptionLabel","category","getOptionValue","String","id","_ref2","AsyncSelect","isSearchable","onClick","func","delay","timeoutId","_len","arguments","length","args","_key","clearTimeout","setTimeout","apply"],"sourceRoot":""}