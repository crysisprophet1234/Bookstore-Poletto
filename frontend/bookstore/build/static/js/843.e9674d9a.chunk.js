"use strict";(self.webpackChunkbookstore=self.webpackChunkbookstore||[]).push([[843],{5843:function(e,s,a){a.r(s),a.d(s,{default:function(){return h}});var n=a(9439),i=a(2791),l=a(719),t=a(2433),c=a(4982),r=a(5069),d=a(184),o=function(e){var s=e.header,a=e.body,n=e.footer;return(0,d.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,d.jsxs)("div",{className:"modal-content",children:[s,a,n]})})},m=function(e){var s=e.visible,a=e.reservation,l=e.onConfirm,t=e.onCancel,c=(0,i.useState)(!0),m=(0,n.Z)(c,2),x=m[0],h=m[1],u=(0,i.useState)(!1),j=(0,n.Z)(u,2),v=j[0],b=j[1],N=(0,i.useState)(!1),p=(0,n.Z)(N,2),f=p[0],y=p[1];if(!s)return null;var E=(0,d.jsx)(o,{header:(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsxs)("h5",{className:"modal-title",children:["Retornar livros - Reserva #",a.id]}),(0,d.jsx)("button",{type:"button",className:"btn-close",onClick:t,"data-bs-dismiss":"modal","aria-label":"Close"})]}),body:(0,d.jsxs)("div",{className:"modal-body",children:[(0,d.jsx)("p",{children:"Tem certeza que deseja retornar livros e finalizar reserva?"}),(0,d.jsx)("ul",{children:a.books.map((function(e){return(0,d.jsx)("li",{children:(0,d.jsxs)("div",{className:"book-list",children:[(0,d.jsxs)("p",{children:["#",e.id]}),(0,d.jsx)("p",{children:e.name})]})},e.id)}))})]}),footer:(0,d.jsxs)("div",{className:"modal-footer",children:[(0,d.jsx)("button",{className:"btn btn-dark",onClick:t,children:"Voltar"}),(0,d.jsx)("button",{className:"btn btn-primary",onClick:function(){var e,s,n=(e=a.links,s="return",e.find((function(e){return e.rel===s}))),i={method:null===n||void 0===n?void 0:n.type,url:null===n||void 0===n?void 0:n.href,withCredentials:!0};(0,r.QK)(i).then((function(e){return y(!0)})).catch((function(e){return y(!1)})).finally((function(){h(!1),b(!0)}))},children:"Confirmar"})]})}),k=(0,d.jsx)(o,{header:(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h1",{className:"modal-title fs-5 text-".concat(f?"success":"danger"),children:f?"Sucesso":"Falha encontrada"}),(0,d.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),body:(0,d.jsx)("div",{className:"modal-body",children:(0,d.jsx)("p",{children:f?"Reserva finalizada com sucesso.":"Houve erro na finaliza\xe7\xe3o da reserva, tente novamente."})}),footer:(0,d.jsx)("div",{className:"modal-footer",children:(0,d.jsx)("button",{className:"btn btn-primary",onClick:l,children:"Voltar"})})});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"modal ".concat(x?"visible":"invisible"),tabIndex:-1,children:E}),(0,d.jsx)("div",{className:"modal ".concat(v?"visible":"invisible"),tabIndex:-1,children:k})]})},x=function(e){var s=e.statusInput,a=(0,i.useState)(),l=(0,n.Z)(a,2),t=l[0],c=l[1];return(0,i.useEffect)((function(){switch(s){case"IN_PROGRESS":c({class:"text-primary",text:"Em andamento"});break;case"FINISHED":c({class:"text-success",text:"Finalizado"});break;case"EXPIRED":c({class:"text-warning",text:"Expirado"});break;case"CANCELED":c({class:"text-danger",text:"Cancelado"})}}),[s]),(0,d.jsx)("h3",{className:"fw-bold ".concat(null===t||void 0===t?void 0:t.class),children:null===t||void 0===t?void 0:t.text})},h=function(e){var s=e.reservation,a=e.reservationReload,r=(0,i.useState)(!1),o=(0,n.Z)(r,2),h=o[0],u=o[1];return(0,d.jsxs)("div",{className:"base-card reservation-card p-4 rounded-0",children:[(0,d.jsxs)("div",{className:"folded-section",children:[(0,d.jsxs)("div",{className:"field-value mx-2",children:[(0,d.jsx)("div",{className:"upper-section my-3",children:(0,d.jsx)("h3",{children:"N\xdaMERO DA RESERVA"})}),(0,d.jsx)("div",{className:"bottom-section my-3",children:(0,d.jsxs)("h3",{children:["#",s.id]})})]}),(0,d.jsxs)("div",{className:"field-value mx-2 status-field",children:[(0,d.jsx)("div",{className:"upper-section my-3",children:(0,d.jsx)("h3",{children:"STATUS"})}),(0,d.jsx)("div",{className:"bottom-section my-3",children:(0,d.jsx)(x,{statusInput:s.status})})]}),(0,d.jsxs)("div",{className:"field-value mx-2",children:[(0,d.jsx)("div",{className:"upper-section my-3",children:(0,d.jsx)("h3",{children:"IN\xcdCIO"})}),(0,d.jsx)("div",{className:"bottom-section my-3",children:(0,d.jsx)("h3",{children:(0,c.p6)(s.moment)})})]}),(0,d.jsxs)("div",{className:"field-value mx-2",children:[(0,d.jsx)("div",{className:"upper-section my-3",children:(0,d.jsx)("h3",{children:"SEMANAS"})}),(0,d.jsx)("div",{className:"bottom-section my-3",children:(0,d.jsx)("h3",{children:s.weeks})})]}),(0,d.jsxs)("div",{className:"field-value mx-2",children:[(0,d.jsx)("div",{className:"upper-section my-3",children:(0,d.jsx)("h3",{children:"RETORNO"})}),(0,d.jsx)("div",{className:"bottom-section my-3",children:(0,d.jsx)("h3",{children:(0,c.p6)(s.devolution)})})]}),(0,d.jsxs)("div",{className:"field-value mx-2",children:[(0,d.jsx)("div",{className:"upper-section my-3",children:(0,d.jsx)("h3",{children:"CLIENTE"})}),(0,d.jsx)("div",{className:"bottom-section my-3",children:(0,d.jsx)("h3",{children:s.client.firstname+" "+s.client.lastname})})]}),(0,d.jsxs)("div",{className:"field-value mx-2",children:[(0,d.jsx)("div",{className:"upper-section my-3",children:(0,d.jsx)("h3",{children:"LIVROS"})}),(0,d.jsx)("div",{className:"bottom-section my-3",children:(0,d.jsx)("h3",{className:"folded-books",children:s.books.map((function(e){return e.name})).join(", ")})})]}),(0,d.jsx)("div",{className:"expand-section mx-2",children:(0,d.jsx)("button",{className:"expand-btn text-primary",name:"expand-reservation-card-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#reservation-card-collapse".concat(s.id),"aria-expanded":"false","aria-controls":"collapseExample","aria-label":"expand-reservation-card-button",children:window.innerWidth<768?(0,d.jsx)(l.G_S,{}):(0,d.jsxs)("span",{children:["Expandir ",(0,d.jsx)(l.G_S,{})]})})})]}),(0,d.jsxs)("div",{className:"expanded-section collapse",id:"reservation-card-collapse".concat(s.id),children:[(0,d.jsx)("hr",{}),(0,d.jsx)("h4",{children:"LIVROS"}),(0,d.jsx)("div",{className:"books-container",children:s.books.map((function(e){return(0,d.jsx)(t.Z,{book:e},e.id)}))}),(0,d.jsxs)("div",{className:"bottom-section",children:[(0,d.jsxs)("div",{className:"client-container",children:[(0,d.jsxs)("h4",{children:["CLIENTE #",s.client.id]}),(0,d.jsxs)("h5",{className:"mt-3",children:[(0,d.jsx)("b",{children:"Nome: "}),s.client.firstname+" "+s.client.lastname]}),(0,d.jsxs)("h5",{className:"mt-1",children:[(0,d.jsx)("b",{children:"E-mail: "}),s.client.email]})]}),(0,d.jsxs)("div",{className:"btn-container",children:[(0,d.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){return alert("currently disabled")},disabled:"FINISHED"===s.status,children:"CANCELAR"}),(0,d.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return u(!0)},disabled:"FINISHED"===s.status,children:"FINISHED"===s.status?"FINALIZADA":"RETORNAR"}),(0,d.jsx)(m,{visible:h,onConfirm:function(){u(!1),a()},onCancel:function(){return u(!1)},reservation:s})]})]})]})]})}}}]);
//# sourceMappingURL=843.e9674d9a.chunk.js.map